/*
Script Name: 	Tooltip Beautifier (http://jastegg.it/eggs/tooltips/ )
Author:			Diego La Monica 
version: 		1.2.0 beta
version date:	2008-07-28
Plugin for:		JAST ( http://jastegg.it )
--------------------------------
*/
_.extend('Tooltips',{info:{title:'Tooltip Text beautifier',version:'1.2.0',author:'Diego La Monica',url:'http://www.diegolamonica.info'},options:{HTML:'%text%',style:null,offsetX:0,offsetY:10},_tooltipId:null,_tooltipText:[],_getScrollTop:function(){if(document.documentElement&&document.documentElement.scrollTop)return document.documentElement.scrollTop;return document.body.scrollTop;},_getScrollLeft:function(){if(document.documentElement&&document.documentElement.scrollLeft)return document.documentElement.scrollLeft;return document.body.scrollLeft;},setup:function(e,title){e=JASTEggIt._el(e);if((e.title!=null&&e.title!='')||title!=null){if(title==null)title=e.title;JASTEggIt.Events.add(e,'mousemove',function(event){JASTEggIt.Tooltips.displayTooltip(event,JASTEggIt.Events.generator(event))});JASTEggIt.Events.add(e,'mouseout',function(event){JASTEggIt.Tooltips.hideTooltip(JASTEggIt.Events.generator(event))});if(e.id==''||e.id==null)e.id=JASTEggIt.generateUniqueId('tooltip');if(this._tooltipText[e.id]==null){this._tooltipText[e.id]=title;e.removeAttribute("title");}}},startup:function(){var a=JASTEggIt._name('*');for(i=0;i<a.length;i++){JASTEggIt.Tooltips.setup(a[i]);}if(_.Browser.ie&&JASTEggIt.Carousel){_.Events.add(window,'load',_.Tooltips.startup);}},displayTooltip:function(event,obj){if(this._tooltipId==null){var div=JASTEggIt.DOM.createOnDocument('DIV');div.innerHTML='';this._tooltipId=div.id;this.hideTooltip();}var tooltip=_._id(this._tooltipId);if(obj.title!=''||(obj.id!=null&&obj.id!=''&&this._tooltipText[obj.id])){tooltip.innerHTML=this.options.HTML.replace('%text%',this._tooltipText[obj.id]);if(this.options.style)_.DOM.setStyle(this._tooltipId,this.options.style);var c=obj.className;c=c.split(' ');var o=new Object();o.x=this.options.offsetX;o.y=this.options.offsetY;for(var i=0;i<c.length;i++){if(c[i].substring(0,5)=='jast_'){var props=c[i].split('_');o[props[1]]=props[2];}}_.DOM.setStyle(this._tooltipId,{position:'absolute',display:'',left:(event.clientX+parseInt(o.x)+JASTEggIt.Tooltips._getScrollLeft())+'px',top:(event.clientY+parseInt(o.y)+JASTEggIt.Tooltips._getScrollTop())+'px'});}},hideTooltip:function(obj){_.DOM.setStyle(this._tooltipId,{display:'none'});}});