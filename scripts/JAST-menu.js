/*
Script Name: 	Carousel - (http://jastegg.it/eggs/Menu/ ) 
version: 		1.0 beta
version date:	2007-11-12
Plugin for:		JAST ( http://jastegg.it )
--------------------------------
*/
JASTEggIt.extend('menu',{info:{title:'Menu',version:'1.0 beta',eggUrl:'http://jastegg.it/eggs/menu',author:'Diego La Monica',url:'http://diegolamonica.info'},options:{expandTo:1,listClass:'.jast-menu',expandedClass:'menu-collapse',collapsedClass:'menu-expand'},startup:function(){var ul=JASTEggIt._get(this.options.listClass);for(var i=0;i<ul.length;i++){this.setup(ul[i]);};},setup:function(list){var items=JASTEggIt._name("li",list);for(var i=0;i<items.length;i++){this.listItem(items[i]);};},listItem:function(li){if(JASTEggIt._name('ul',li).length>0){var ul=JASTEggIt._name('ul',li)[0];if(ul.id==null||ul.id=='')ul.id=JASTEggIt.generateUniqueId('menu');if(li.id==null||li.id=='')li.id=JASTEggIt.generateUniqueId('menu');JASTEggIt.DOM.setStyle(ul,{display:(this.depth(ul)<=this.options.expandTo)?"block":"none"});li.className=(this.depth(ul)<=this.options.expandTo)?this.options.expandedClass:this.options.collapsedClass;li.tabIndex='0';li.over=true;JASTEggIt.event(ul.id,'mouseover',function(){li.over=false;});JASTEggIt.event(ul.id,'mouseout',function(){li.over=true;});JASTEggIt.event(li.id,'keypress',function(event){var itm=null;if(event.srcElement!=null)itm=event.srcElement;if(event.target!=null)itm=event.target;if(itm==null)return false;var key=JASTEggIt.kbd.getKeyPressed(event);if((key=='+'.charCodeAt(0)&&itm.className==JASTEggIt.menu.options.collapsedClass)||(key=='-'.charCodeAt(0)&&itm.className==JASTEggIt.menu.options.expandedClass)||(key==13)){if(itm.over){ul.style.display=(ul.style.display=="none")?"block":"none";this.className=(ul.style.display=="none")?JASTEggIt.menu.options.collapsedClass:JASTEggIt.menu.options.expandedClass;}};});JASTEggIt.event(li.id,'click',function(event){var id='';var e=event!=null?event:window.event;if(e.srcElement!=null)id=e.srcElement.id;if(e.target!=null)id=e.target.id;if(id==null||id=='')return false;if(_._id(id).over){ul.style.display=(ul.style.display=="none")?"block":"none";this.className=(ul.style.display=="none")?JASTEggIt.menu.options.collapsedClass:JASTEggIt.menu.options.expandedClass;}});};},depth:function(obj){var level=1;while("."+obj.parentNode.className!=this.options.listClass){if(obj.tagName=="UL")level++;obj=obj.parentNode;};return level;}});