/*
Script Name: 	Carousel - (http://jastegg.it/eggs/Carousel/ ) 
version: 		1.0 beta
version date:	2007-11-12
Plugin for:		JAST ( http://jastegg.it )
--------------------------------
*/
JASTEggIt.extend('Carousel',{info:{title:'Carousel',version:'1.0 beta',eggUrl:'http://jastegg.it/eggs/Carousel',author:'Diego La Monica',url:'http://diegolamonica.info'},options:{id:'div-carousel',label:'JAST Carousel',step:5,imagesPerPage:3,speed:5,images:['test.jpg'],labels:['test image'],startFrom:1,thumbnailWidth:60,thumbnailHeight:80,leftLabel:'Scroll left',rightLabel:'Scroll right'},_carousel:[],setup:function(options){var l=this._carousel.length;this._carousel[l]=JASTEggIt.mergeOptions(options,this.options);this.draw(l);},draw:function(idx){var shortcut='javascript:var x = JASTEggIt.Carousel';var itm=this._carousel[idx];var e=JASTEggIt._id(itm.id);if(e==null)return false;if(e.style.position!='relative')e.style.position='relative';var buffer='';itm.id=JASTEggIt.generateUniqueId('carousel');buffer+='<div class="carousel-label" style="height: auto;">'+itm.label+'</div>';buffer+='<'+'a href="'+shortcut+'.move('+idx+', -1);" class ="left">'+itm.leftLabel+'<'+'/a>';buffer+='<'+'div class="container">';buffer+='<'+'div id="'+itm.id+'">';for(i=0;i<itm.images.length;i++){buffer+='<'+'div><'+'img alt="" src="'+itm.images[i]+'" width="'+itm.thumbnailWidth+'" height="'+itm.thumbnailHeight+'" /><'+'br /><'+'span class="label">'+itm.labels[i]+'<'+'/span><'+'/div>';};buffer+='<'+'/div>';buffer+='<'+'/div>';buffer+='<'+'a href="'+shortcut+'.move('+idx+', 1);" class ="right">'+itm.rightLabel+'<'+'/a>';e.innerHTML=buffer;var e=JASTEggIt._id(itm.id);var li=e.firstChild;e.style.width=(JASTEggIt.DOM.realSize(li).width*itm.images.length)+'px';},move:function(idx,step){var itm=this._carousel[idx];if(step<0&&itm.startFrom<=1)return false;step=step*itm.imagesPerPage;if(itm.startFrom>0&&itm.startFrom+step<0)step=(itm.startFrom-1)*-1;if(itm.startFrom+step<0)step=0;if(itm.startFrom+step+itm.imagesPerPage>itm.images.length)step=itm.images.length-itm.imagesPerPage;if(itm.startFrom+itm.imagesPerPage>=itm.images.length&&step>0)return false;itm.startFrom=itm.startFrom+step;var e=JASTEggIt._id(itm.id);var li=e.firstChild;var ret=JASTEggIt.DOM.realSize(li);limit=ret.width*step;JASTEggIt.fx.queue([[itm.id,function(id,q){JASTEggIt.fx.fadeOut(id,2,20,5,q)}],[itm.id,function(id,q){JASTEggIt.fx.hscroll(id,itm.speed,(-1*step),limit,q)}],[itm.id,function(id,q){JASTEggIt.fx.fadeIn(id,2,100,5,q)}]]);}});